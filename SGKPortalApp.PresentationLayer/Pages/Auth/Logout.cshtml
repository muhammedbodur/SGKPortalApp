@page
@model SGKPortalApp.PresentationLayer.Pages.Auth.LogoutModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Ã‡Ä±kÄ±ÅŸ YapÄ±lÄ±yor...</title>
</head>
<body>
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
        <div style="text-align: center;">
            <h2>Ã‡Ä±kÄ±ÅŸ yapÄ±lÄ±yor...</h2>
            <p>LÃ¼tfen bekleyin...</p>
        </div>
    </div>

    <script>
        // Logout iÅŸlemi sÄ±rasÄ±nda tÃ¼m client-side verileri temizle
        (function() {
            console.log('ğŸ”„ Logout: Client-side temizlik baÅŸlatÄ±lÄ±yor...');
            
            try {
                // 1. LocalStorage temizle
                localStorage.removeItem('callPanelIsPinned');
                localStorage.removeItem('callPanelIsVisible');
                localStorage.removeItem('bankoMode');
                localStorage.removeItem('activeBankoId');
                console.log('âœ… LocalStorage temizlendi');
                
                // 2. SessionStorage temizle
                sessionStorage.clear();
                console.log('âœ… SessionStorage temizlendi');
                
                // 3. SÄ±ra Ã‡aÄŸÄ±rma Paneli'ni temizle (varsa)
                if (typeof SiraCagirmaPanel !== 'undefined') {
                    try {
                        SiraCagirmaPanel.setPin(false);
                        SiraCagirmaPanel.closePanel();
                        SiraCagirmaPanel.destroy();
                        console.log('âœ… SÄ±ra Ã‡aÄŸÄ±rma Paneli temizlendi');
                    } catch (e) {
                        console.warn('âš ï¸ SÄ±ra Ã‡aÄŸÄ±rma Paneli temizlenirken hata:', e);
                    }
                }
                
                // 4. Banko Mode state'ini temizle (varsa)
                if (typeof BankoMode !== 'undefined') {
                    try {
                        BankoMode.cleanup();
                        console.log('âœ… Banko Mode temizlendi');
                    } catch (e) {
                        console.warn('âš ï¸ Banko Mode temizlenirken hata:', e);
                    }
                }
                
                console.log('âœ… Logout: Client-side temizlik tamamlandÄ±');
            } catch (error) {
                console.error('âŒ Logout temizlik hatasÄ±:', error);
            }
        })();
    </script>
</body>
</html>
