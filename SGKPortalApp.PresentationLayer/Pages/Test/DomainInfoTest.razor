@page "/test/domain-info"

<PageTitle>Domain Bilgisi Test</PageTitle>

<div class="container mt-4">
    <h2>ğŸ” Domain Bilgisi Test SayfasÄ±</h2>
    <p class="text-muted">Bu sayfa domain bilgilerini alÄ±p alamadÄ±ÄŸÄ±mÄ±zÄ± test eder.</p>

    <hr />

    <!-- Test 1: Server-Side Bilgiler -->
    <div class="card mb-3">
        <div class="card-header bg-primary text-white">
            <h5>Test 1: Server-Side Domain Bilgileri</h5>
        </div>
        <div class="card-body">
            <button class="btn btn-primary" @onclick="GetServerInfo">
                ğŸ–¥ï¸ Server Bilgilerini Al
            </button>

            @if (serverInfo != null)
            {
                <div class="mt-3">
                    <pre class="bg-light p-3">@serverInfo</pre>
                </div>
            }
        </div>
    </div>

    <!-- Test 2: Email'den VarsayÄ±m -->
    <div class="card mb-3">
        <div class="card-header bg-success text-white">
            <h5>Test 2: Email'den Domain User VarsayÄ±mÄ±</h5>
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label class="form-label">Email:</label>
                <input type="email" class="form-control" @bind="testEmail"
                       placeholder="ornek: ahmet.yilmaz@sgk.gov.tr" />
            </div>
            <button class="btn btn-success" @onclick="TestEmailToDomain">
                âœ‰ï¸ Email'den Domain User Hesapla
            </button>

            @if (emailResult != null)
            {
                <div class="mt-3">
                    <pre class="bg-light p-3">@emailResult</pre>
                </div>
            }
        </div>
    </div>

    <!-- Test 3: Client-Side Bilgiler -->
    <div class="card mb-3">
        <div class="card-header bg-warning text-dark">
            <h5>Test 3: Client-Side Bilgiler (JavaScript)</h5>
        </div>
        <div class="card-body">
            <button class="btn btn-warning" @onclick="GetClientInfo">
                ğŸ’» Browser Bilgilerini Al
            </button>

            @if (clientInfo != null)
            {
                <div class="mt-3">
                    <pre class="bg-light p-3">@clientInfo</pre>
                </div>
            }
        </div>
    </div>

    <!-- SonuÃ§ ve Ã–neriler -->
    <div class="alert alert-info">
        <h5>ğŸ“‹ SonuÃ§lar:</h5>
        <ul>
            <li><strong>Server bilgileri:</strong> Server process'in Ã§alÄ±ÅŸtÄ±ÄŸÄ± user'Ä± gÃ¶sterir (genelde IIS AppPool)</li>
            <li><strong>Email varsayÄ±mÄ±:</strong> En pratik yÃ¶ntem. Email'den domain username Ã§Ä±karÄ±lÄ±r.</li>
            <li><strong>Client bilgileri:</strong> Browser'dan domain bilgisi alÄ±namaz (gÃ¼venlik kÄ±sÄ±tlamasÄ±)</li>
        </ul>
        <hr />
        <h6>ğŸ’¡ Ã–neri:</h6>
        <p>
            <strong>Email'den varsayÄ±m</strong> yÃ¶ntemi kullanÄ±lmasÄ± Ã¶nerilir:<br />
            <code>ahmet.yilmaz@sgk.gov.tr</code> â†’ <code>SGKDOMAIN\ahmet.yilmaz</code>
        </p>
    </div>
</div>
